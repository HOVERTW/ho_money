# ğŸ³ FinTranzo Docker å®Œæ•´æ¸¬è©¦å’Œéƒ¨ç½²æŒ‡å—

## ğŸ¯ **ç‚ºä»€éº¼ä½¿ç”¨ Dockerï¼Ÿ**

Docker ç¢ºä¿æˆ‘å€‘èƒ½å¤ ï¼š
- âœ… **100% ç’°å¢ƒä¸€è‡´æ€§**ï¼šæœ¬åœ°ã€æ¸¬è©¦ã€ç”Ÿç”¢ç’°å¢ƒå®Œå…¨ç›¸åŒ
- âœ… **çœŸå¯¦æ¸¬è©¦**ï¼šåœ¨å®¹å™¨ä¸­é‹è¡ŒçœŸå¯¦çš„ web ç‰ˆæœ¬
- âœ… **é›¶é…ç½®éƒ¨ç½²**ï¼šæ¸¬è©¦é€šéå¾Œå¯ä»¥ç›´æ¥éƒ¨ç½²
- âœ… **å¤šå¹³å°æ”¯æŒ**ï¼šåŒæ™‚æ”¯æŒ web å’Œ iOS æ¸¬è©¦
- âœ… **éš”é›¢ç’°å¢ƒ**ï¼šé¿å…æœ¬åœ°ç’°å¢ƒæ±¡æŸ“

## ğŸš€ **å¿«é€Ÿé–‹å§‹**

### 1. å®‰è£ Docker
```bash
# Windows/Mac: ä¸‹è¼‰ Docker Desktop
# Linux: 
sudo apt-get update
sudo apt-get install docker.io docker-compose
```

### 2. é‹è¡Œå®Œæ•´æ¸¬è©¦
```bash
# é‹è¡Œå®Œæ•´çš„æ¸¬è©¦å¥—ä»¶
npm run docker:test

# æˆ–è€…ç›´æ¥é‹è¡Œè…³æœ¬
bash scripts/docker-test.sh
```

### 3. é–‹ç™¼ç’°å¢ƒ
```bash
# Web é–‹ç™¼ç’°å¢ƒ
npm run docker:dev

# iOS é–‹ç™¼ç’°å¢ƒ  
npm run docker:ios

# ç”Ÿç”¢ç’°å¢ƒæ¸¬è©¦
npm run docker:prod
```

## ğŸ“‹ **æ¸¬è©¦æµç¨‹èªªæ˜**

### å®Œæ•´æ¸¬è©¦æµç¨‹åŒ…æ‹¬ï¼š

1. **ğŸ” ç’°å¢ƒæª¢æŸ¥**
   - æª¢æŸ¥ Docker æ˜¯å¦å®‰è£å’Œé‹è¡Œ
   - é©—è­‰ Docker Compose å¯ç”¨æ€§

2. **ğŸ§¹ ç’°å¢ƒæ¸…ç†**
   - æ¸…ç†èˆŠå®¹å™¨å’Œé¡åƒ
   - ç¢ºä¿ä¹¾æ·¨çš„æ¸¬è©¦ç’°å¢ƒ

3. **ğŸ—ï¸ æ§‹å»ºæ¸¬è©¦ç’°å¢ƒ**
   - æ§‹å»ºæ‰€æœ‰å¿…è¦çš„ Docker é¡åƒ
   - è¨­ç½®æ¸¬è©¦ç¶²çµ¡å’Œå·

4. **ğŸ§ª é‹è¡Œæ¸¬è©¦å¥—ä»¶**
   - **å–®å…ƒæ¸¬è©¦**ï¼šæ¸¬è©¦å€‹åˆ¥çµ„ä»¶å’Œæœå‹™
   - **é›†æˆæ¸¬è©¦**ï¼šæ¸¬è©¦æœå‹™é–“çš„äº¤äº’
   - **Web ç«¯åˆ°ç«¯æ¸¬è©¦**ï¼šæ¸¬è©¦å®Œæ•´çš„ç”¨æˆ¶æµç¨‹
   - **æ€§èƒ½æ¸¬è©¦**ï¼šæª¢æŸ¥æ‡‰ç”¨æ€§èƒ½
   - **å®‰å…¨æ¸¬è©¦**ï¼šé©—è­‰å®‰å…¨æ€§

5. **ğŸ­ ç”Ÿç”¢æ§‹å»ºæ¸¬è©¦**
   - æ§‹å»ºç”Ÿç”¢ç‰ˆæœ¬çš„ Docker é¡åƒ
   - æ¸¬è©¦ç”Ÿç”¢ç’°å¢ƒçš„é‹è¡Œ

6. **ğŸ“Š ç”Ÿæˆæ¸¬è©¦å ±å‘Š**
   - ç”Ÿæˆè©³ç´°çš„æ¸¬è©¦å ±å‘Š
   - åŒ…å«è¦†è“‹ç‡å’Œæ€§èƒ½æŒ‡æ¨™

## ğŸ› ï¸ **å¯ç”¨çš„ Docker å‘½ä»¤**

### é–‹ç™¼å‘½ä»¤
```bash
# Web é–‹ç™¼ç’°å¢ƒï¼ˆç†±é‡è¼‰ï¼‰
docker-compose up web-dev

# iOS é–‹ç™¼ç’°å¢ƒ
docker-compose up ios-dev

# æŸ¥çœ‹æ—¥èªŒ
docker-compose logs -f web-dev
```

### æ¸¬è©¦å‘½ä»¤
```bash
# é‹è¡Œæ‰€æœ‰æ¸¬è©¦
docker-compose -f docker/docker-compose.test.yml up

# é‹è¡Œç‰¹å®šæ¸¬è©¦
docker-compose -f docker/docker-compose.test.yml run --rm full-test
docker-compose -f docker/docker-compose.test.yml run --rm web-e2e
docker-compose -f docker/docker-compose.test.yml run --rm performance-test
```

### ç”Ÿç”¢å‘½ä»¤
```bash
# æ§‹å»ºç”Ÿç”¢é¡åƒ
docker-compose build web-prod

# é‹è¡Œç”Ÿç”¢ç’°å¢ƒ
docker-compose up web-prod

# æª¢æŸ¥å¥åº·ç‹€æ…‹
curl http://localhost/health
```

## ğŸ”§ **é…ç½®èªªæ˜**

### ç’°å¢ƒè®Šé‡
- `.env` - é–‹ç™¼ç’°å¢ƒé…ç½®
- `.env.test` - æ¸¬è©¦ç’°å¢ƒé…ç½®
- `.env.production` - ç”Ÿç”¢ç’°å¢ƒé…ç½®

### Docker é…ç½®æ–‡ä»¶
- `Dockerfile` - å¤šéšæ®µæ§‹å»ºé…ç½®
- `docker-compose.yml` - ä¸»è¦æœå‹™é…ç½®
- `docker/docker-compose.test.yml` - æ¸¬è©¦å°ˆç”¨é…ç½®
- `docker/nginx.conf` - Nginx ç”Ÿç”¢é…ç½®

## ğŸ“Š **æ¸¬è©¦çµæœè§£è®€**

### æˆåŠŸæ¨™æº–
æ‰€æœ‰ä»¥ä¸‹æ¸¬è©¦éƒ½å¿…é ˆé€šéï¼š
- âœ… å–®å…ƒæ¸¬è©¦ï¼š100% é€šé
- âœ… é›†æˆæ¸¬è©¦ï¼šæ•¸æ“šåº«é€£æ¥å’Œ API æ­£å¸¸
- âœ… Web E2E æ¸¬è©¦ï¼šç”¨æˆ¶æµç¨‹å®Œæ•´
- âœ… æ€§èƒ½æ¸¬è©¦ï¼šéŸ¿æ‡‰æ™‚é–“ < 2ç§’
- âœ… å®‰å…¨æ¸¬è©¦ï¼šç„¡å®‰å…¨æ¼æ´
- âœ… ç”Ÿç”¢æ§‹å»ºï¼šæˆåŠŸæ§‹å»ºä¸¦é‹è¡Œ

### å¤±æ•—è™•ç†
å¦‚æœä»»ä½•æ¸¬è©¦å¤±æ•—ï¼š
1. æŸ¥çœ‹è©³ç´°çš„æ¸¬è©¦å ±å‘Š
2. æª¢æŸ¥ Docker å®¹å™¨æ—¥èªŒ
3. ä¿®å¾©å•é¡Œå¾Œé‡æ–°é‹è¡Œæ¸¬è©¦
4. ç¢ºä¿æ‰€æœ‰æ¸¬è©¦é€šéå¾Œæ‰éƒ¨ç½²

## ğŸš€ **éƒ¨ç½²æµç¨‹**

### 1. æœ¬åœ°æ¸¬è©¦é€šé
```bash
npm run docker:test
# ç¢ºä¿æ‰€æœ‰æ¸¬è©¦éƒ½é€šé
```

### 2. æ§‹å»ºç”Ÿç”¢é¡åƒ
```bash
docker-compose build web-prod
```

### 3. æœ¬åœ°ç”Ÿç”¢æ¸¬è©¦
```bash
docker-compose up web-prod
# è¨ªå• http://localhost æ¸¬è©¦
```

### 4. éƒ¨ç½²åˆ°ç”Ÿç”¢ç’°å¢ƒ
```bash
# æ¨é€åˆ° Docker Registry
docker tag fintranzo_web-prod your-registry/fintranzo:latest
docker push your-registry/fintranzo:latest

# æˆ–è€…ç›´æ¥éƒ¨ç½²åˆ° GitHub Pages
npm run deploy
```

## ğŸ› **æ•…éšœæ’é™¤**

### å¸¸è¦‹å•é¡Œ

1. **Docker æœå‹™æœªé‹è¡Œ**
   ```bash
   # Windows/Mac: å•Ÿå‹• Docker Desktop
   # Linux:
   sudo systemctl start docker
   ```

2. **ç«¯å£è¢«å ç”¨**
   ```bash
   # æŸ¥çœ‹ç«¯å£ä½¿ç”¨
   netstat -tulpn | grep :19006
   
   # åœæ­¢å ç”¨é€²ç¨‹
   docker-compose down
   ```

3. **é¡åƒæ§‹å»ºå¤±æ•—**
   ```bash
   # æ¸…ç† Docker ç·©å­˜
   docker system prune -a
   
   # é‡æ–°æ§‹å»º
   docker-compose build --no-cache
   ```

4. **æ¸¬è©¦è¶…æ™‚**
   ```bash
   # å¢åŠ æ¸¬è©¦è¶…æ™‚æ™‚é–“
   export TEST_TIMEOUT=60000
   npm run docker:test
   ```

## ğŸ“ˆ **æ€§èƒ½å„ªåŒ–**

### Docker å„ªåŒ–
- ä½¿ç”¨å¤šéšæ®µæ§‹å»ºæ¸›å°‘é¡åƒå¤§å°
- åˆ©ç”¨ Docker å±¤ç·©å­˜åŠ é€Ÿæ§‹å»º
- ä½¿ç”¨ .dockerignore æ’é™¤ä¸å¿…è¦æ–‡ä»¶

### æ¸¬è©¦å„ªåŒ–
- ä¸¦è¡Œé‹è¡Œç¨ç«‹æ¸¬è©¦
- ä½¿ç”¨æ¸¬è©¦æ•¸æ“šåº«é¿å…æ±¡æŸ“
- ç·©å­˜ä¾è³´æ¸›å°‘å®‰è£æ™‚é–“

## ğŸ”’ **å®‰å…¨è€ƒæ…®**

- ä¸åœ¨ Docker é¡åƒä¸­åŒ…å«æ•æ„Ÿä¿¡æ¯
- ä½¿ç”¨ç’°å¢ƒè®Šé‡ç®¡ç†é…ç½®
- å®šæœŸæ›´æ–°åŸºç¤é¡åƒ
- æƒæé¡åƒå®‰å…¨æ¼æ´

## ğŸ“ **æ”¯æŒ**

å¦‚æœé‡åˆ°å•é¡Œï¼š
1. æŸ¥çœ‹ Docker æ—¥èªŒï¼š`docker-compose logs`
2. æª¢æŸ¥æ¸¬è©¦å ±å‘Šï¼š`./test-reports/`
3. åƒè€ƒæ•…éšœæ’é™¤éƒ¨åˆ†
4. è¯ç¹«é–‹ç™¼åœ˜éšŠ
